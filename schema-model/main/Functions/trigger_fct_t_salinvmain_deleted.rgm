function "main"."trigger_fct_t_salinvmain_deleted()" {
  text = """

DECLARE
    v_voidid    text;
    v_terminal  text;
BEGIN
  BEGIN
IF coalesce(OLD.ENTRY_SOURCE,'XX') <> 'WEB' THEN
        SELECT  osuser, terminal
        INTO STRICT    v_voidid, v_terminal
        FROM    v_$session
        WHERE   sid IN (SELECT distinct sid FROM v_$mystat);

        INSERT INTO SALINVMAIN_DELETED(
                INVCODE,
                INVNO,
                INVDT,
                PCODE,
                DOCNO,
                DUEDT,
                AGCODE,
                AGRATE,
                GRSAMT,
                CHGAMT,
                NETAMT,
                ADJAMT,
                GLCODE,
                REM,
                YCODE,
                ECODE,
                TIME,
                SALTERMCODE,
                LAST_ACCESS_TIME,
                LAST_ACCESS_ECODE,
                LGTCODE,
                DOCDT,
                DOCCODE,
                SCHEME_DOCNO,
                TRPCODE,
                SALETYPE,
                PGLCODE,
                SLCODE,
                INLOCCODE,
                TRANSITDAYS,
                ISSECONDARY,
                GL_CC_APPL,
                ADMOU_CODE,
                ADMSITE_CODE,
                AUTHORIZE_ECODE,
                AUTHORIZE_TIME,
                TRANSIT_DUE_DATE,
                DATASENDON,
                ADMOU_CODE_IN,
                ADMSITE_CODE_OWNER,
                PSLCODE,
                FORMAPP,
                FORMNO,
                FORMDT,
                UDFSTRING01,
                UDFNUM01,
                UDFNUM02,
                RELEASE_STATUS,
                RELEASE_TIME,
                RELEASE_ECODE,
                SALTRADEGRP_CODE,
                FORMCODE,
                FORMAMT,
                PRICETYPE,
                PRICELISTCODE,
                DISCOUNT_FACTOR,
                PRICE_ROUNDOFF,
                ROUNDOFF_LIMIT,
                INCL_VAT_IN_DIST,
                DISCOUNT_MODE,
                DISCOUNT_BASIS,
                INTGCODE,
                UDFSTRING02,
                UDFSTRING03,
                UDFSTRING04,
                UDFSTRING05,
                UDFSTRING06,
                UDFSTRING07,
                UDFSTRING08,
                UDFSTRING09,
                UDFSTRING10,
                UDFNUM03,
                UDFNUM04,
                UDFNUM05,
                UDFDATE01,
                UDFDATE02,
                UDFDATE03,
                UDFDATE04,
                UDFDATE05,
                OWNER_GSTIN_NO,
                OWNER_GSTIN_STATE_CODE,
                CP_GSTIN_NO,
                CP_GSTIN_STATE_CODE,
                GSTAPPL,
                MAIN_GL_AMT,
                VOIDBY,
                VOIDON,
                terminal
            )
        VALUES (
                OLD.INVCODE,
                OLD.INVNO,
                OLD.INVDT,
                OLD.PCODE,
                OLD.DOCNO,
                OLD.DUEDT,
                OLD.AGCODE,
                OLD.AGRATE,
                OLD.GRSAMT,
                OLD.CHGAMT,
                OLD.NETAMT,
                OLD.ADJAMT,
                OLD.GLCODE,
                OLD.REM,
                OLD.YCODE,
                OLD.ECODE,
                OLD.TIME,
                OLD.SALTERMCODE,
                OLD.LAST_ACCESS_TIME,
                OLD.LAST_ACCESS_ECODE,
                OLD.LGTCODE,
                OLD.DOCDT,
                OLD.DOCCODE,
                OLD.SCHEME_DOCNO,
                OLD.TRPCODE,
                OLD.SALETYPE,
                OLD.PGLCODE,
                OLD.SLCODE,
                OLD.INLOCCODE,
                OLD.TRANSITDAYS,
                OLD.ISSECONDARY,
                OLD.GL_CC_APPL,
                OLD.ADMOU_CODE,
                OLD.ADMSITE_CODE,
                OLD.AUTHORIZE_ECODE,
                OLD.AUTHORIZE_TIME,
                OLD.TRANSIT_DUE_DATE,
                OLD.DATASENDON,
                OLD.ADMOU_CODE_IN,
                OLD.ADMSITE_CODE_OWNER,
                OLD.PSLCODE,
                OLD.FORMAPP,
                OLD.FORMNO,
                OLD.FORMDT,
                OLD.UDFSTRING01,
                OLD.UDFNUM01,
                OLD.UDFNUM02,
                OLD.RELEASE_STATUS,
                OLD.RELEASE_TIME,
                OLD.RELEASE_ECODE,
                OLD.SALTRADEGRP_CODE,
                OLD.FORMCODE,
                OLD.FORMAMT,
                OLD.PRICETYPE,
                OLD.PRICELISTCODE,
                OLD.DISCOUNT_FACTOR,
                OLD.PRICE_ROUNDOFF,
                OLD.ROUNDOFF_LIMIT,
                OLD.INCL_VAT_IN_DIST,
                OLD.DISCOUNT_MODE,
                OLD.DISCOUNT_BASIS,
                OLD.INTGCODE,
                OLD.UDFSTRING02,
                OLD.UDFSTRING03,
                OLD.UDFSTRING04,
                OLD.UDFSTRING05,
                OLD.UDFSTRING06,
                OLD.UDFSTRING07,
                OLD.UDFSTRING08,
                OLD.UDFSTRING09,
                OLD.UDFSTRING10,
                OLD.UDFNUM03,
                OLD.UDFNUM04,
                OLD.UDFNUM05,
                OLD.UDFDATE01,
                OLD.UDFDATE02,
                OLD.UDFDATE03,
                OLD.UDFDATE04,
                OLD.UDFDATE05,
                OLD.OWNER_GSTIN_NO,
                OLD.OWNER_GSTIN_STATE_CODE,
                OLD.CP_GSTIN_NO,
                OLD.CP_GSTIN_STATE_CODE,
                OLD.GSTAPPL,
                OLD.MAIN_GL_AMT,
                v_voidid,
                statement_timestamp(),
                v_terminal
            );
END IF;
EXCEPTION
    WHEN unique_violation THEN
        NULL;
  END;
RETURN OLD;
END
"""
  returnType = trigger
  arguments = [
  ]
  language = plpgsql
}

