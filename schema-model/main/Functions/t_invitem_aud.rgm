function "main"."t_invitem_aud()" {
  text = """

DECLARE
    V_RECORD_OLD AUD_INVITEM%ROWTYPE;
	V_RECORD_NEW AUD_INVITEM%ROWTYPE;
    V_SID DOUBLE PRECISION;
    V_TRNID CHARACTER VARYING(50);
    V_ACTION CHARACTER VARYING(10);
    I RECORD;    
	V_AUDIT_USER CHARACTER VARYING (100);
	V_LOGINUSER  CHARACTER VARYING (100);
	V_PROGRAM    CHARACTER VARYING (100);
	V_REC_COUNT  BIGINT; 
   
BEGIN
       SELECT current_setting('audit.AUDIT_USER', true) INTO V_AUDIT_USER;
	   
	  -- CALL ERRAUDIT('T','T','T',V_AUDIT_USER);
	   IF NULLIF(V_AUDIT_USER,'') IS NOT NULL THEN
	   BEGIN
	   		SELECT FULLNAME
	   		INTO   STRICT V_LOGINUSER
	   		FROM   APPUSER
	   		WHERE  ID =  substring (V_AUDIT_USER,8,position(';' in V_AUDIT_USER)-8)::numeric; 
       EXCEPTION
		    WHEN no_data_found
			THEN
			    V_LOGINUSER := 'System';
	    END;			
	   ELSE
	     V_LOGINUSER := 'System';
	   END IF;
	   
	   select application_name
	   INTO   V_PROGRAM
	   from pg_stat_activity where pid = pg_backend_pid();

       V_ACTION:=TG_OP;
	   
       SELECT TXID_CURRENT() INTO V_TRNID;
       
        IF TG_OP = 'INSERT' OR  TG_OP = 'UPDATE' THEN 
	   
           V_RECORD_NEW.ACTION := V_ACTION;
           V_RECORD_NEW.ACTION_SUBTYPE := 'NEW';
           V_RECORD_NEW.TRANSACTION_ID := V_TRNID::TEXT;
           V_RECORD_NEW.ICODE := NEW.ICODE;
            V_RECORD_NEW.GRPCODE := NEW.GRPCODE;
            V_RECORD_NEW.CNAME1 := NEW.CNAME1;
            V_RECORD_NEW.CCODE1 := NEW.CCODE1;
            V_RECORD_NEW.CNAME2 := NEW.CNAME2;
            V_RECORD_NEW.CCODE2 := NEW.CCODE2;
            V_RECORD_NEW.CNAME3 := NEW.CNAME3;
            V_RECORD_NEW.CCODE3 := NEW.CCODE3;
            V_RECORD_NEW.CNAME4 := NEW.CNAME4;
            V_RECORD_NEW.CCODE4 := NEW.CCODE4;
            V_RECORD_NEW.CNAME5 := NEW.CNAME5;
            V_RECORD_NEW.CCODE5 := NEW.CCODE5;
            V_RECORD_NEW.CNAME6 := NEW.CNAME6;
            V_RECORD_NEW.CCODE6 := NEW.CCODE6;
            V_RECORD_NEW.RATE := NEW.RATE;
            V_RECORD_NEW.MRP := NEW.MRP;
            V_RECORD_NEW.BARRQ := NEW.BARRQ;
            V_RECORD_NEW.BARUNIT := NEW.BARUNIT;
            V_RECORD_NEW.REM := NEW.REM;
            V_RECORD_NEW.EXT := NEW.EXT;
            V_RECORD_NEW.TAXCODE := NEW.TAXCODE;
            V_RECORD_NEW.PARTYCODE := NEW.PARTYCODE;
            V_RECORD_NEW.PARTYNAME := NEW.PARTYNAME;
            V_RECORD_NEW.GENERATED := NEW.GENERATED;
            V_RECORD_NEW.LAST_CHANGED := NEW.LAST_CHANGED;
            V_RECORD_NEW.CMPCODE := NEW.CMPCODE;
            V_RECORD_NEW.UNITNAME := NEW.UNITNAME;
            V_RECORD_NEW.CHARGE := NEW.CHARGE;
            V_RECORD_NEW.GRCCODE := NEW.GRCCODE;
            V_RECORD_NEW.STKPLANCODE := NEW.STKPLANCODE;
            V_RECORD_NEW.BARCODE := NEW.BARCODE;
            V_RECORD_NEW.LISTED_MRP := NEW.LISTED_MRP;
            V_RECORD_NEW.EXPIRY_DATE := NEW.EXPIRY_DATE;
            V_RECORD_NEW.PARTYALIAS := NEW.PARTYALIAS;
            V_RECORD_NEW.STOCKINDATE := NEW.STOCKINDATE;
            V_RECORD_NEW.CONSIDERINORDER := NEW.CONSIDERINORDER;
            V_RECORD_NEW.SHRTNAME := NEW.SHRTNAME;
            V_RECORD_NEW.CONSIDERASFREE := NEW.CONSIDERASFREE;
            V_RECORD_NEW.NONINVENTORY := NEW.NONINVENTORY;
            V_RECORD_NEW.COSTRATE := NEW.COSTRATE;
            V_RECORD_NEW.WSP := NEW.WSP;
            V_RECORD_NEW.INVARTICLE_CODE := NEW.INVARTICLE_CODE;
            V_RECORD_NEW.ALLOW_PRICE_MODIFICATION := NEW.ALLOW_PRICE_MODIFICATION;
            V_RECORD_NEW.ALT_MRP := NEW.ALT_MRP;
            V_RECORD_NEW.ALT_LISTED_MRP := NEW.ALT_LISTED_MRP;
            V_RECORD_NEW.ISSERVICE := NEW.ISSERVICE;
            V_RECORD_NEW.SERVICE_DAYS := NEW.SERVICE_DAYS;
            V_RECORD_NEW.POS_MULTIPRICE_ACTION := NEW.POS_MULTIPRICE_ACTION;
            V_RECORD_NEW.NEGATIVE_STOCK_ALERT := NEW.NEGATIVE_STOCK_ALERT;
            V_RECORD_NEW.ISMETAL := NEW.ISMETAL;
            V_RECORD_NEW.ITEM_NAME := NEW.ITEM_NAME;
            V_RECORD_NEW.PRICE_TERMS := NEW.PRICE_TERMS;
            V_RECORD_NEW.PRICE_BASIS := NEW.PRICE_BASIS;
            V_RECORD_NEW.INVMETAL_CODE := NEW.INVMETAL_CODE;
            V_RECORD_NEW.NET_WEIGHT := NEW.NET_WEIGHT;
            V_RECORD_NEW.GRS_WEIGHT := NEW.GRS_WEIGHT;
            V_RECORD_NEW.JOB_COST_BASIS := NEW.JOB_COST_BASIS;
            V_RECORD_NEW.JOB_COST_AMT := NEW.JOB_COST_AMT;
            V_RECORD_NEW.PART_QTY := NEW.PART_QTY;
            V_RECORD_NEW.CERTIFICATE_NO := NEW.CERTIFICATE_NO;
            V_RECORD_NEW.D_COUNT := NEW.D_COUNT;
            V_RECORD_NEW.D_SIZE := NEW.D_SIZE;
            V_RECORD_NEW.D_WEIGHT := NEW.D_WEIGHT;
            V_RECORD_NEW.D_VALUE := NEW.D_VALUE;
            V_RECORD_NEW.D_DESC := NEW.D_DESC;
            V_RECORD_NEW.C_COUNT := NEW.C_COUNT;
            V_RECORD_NEW.C_WEIGHT := NEW.C_WEIGHT;
            V_RECORD_NEW.C_VALUE := NEW.C_VALUE;
            V_RECORD_NEW.C_DESC := NEW.C_DESC;
            V_RECORD_NEW.O_COUNT := NEW.O_COUNT;
            V_RECORD_NEW.O_WEIGHT := NEW.O_WEIGHT;
            V_RECORD_NEW.O_VALUE := NEW.O_VALUE;
            V_RECORD_NEW.O_DESC := NEW.O_DESC;
            V_RECORD_NEW.OTHER_CHG := NEW.OTHER_CHG;
            V_RECORD_NEW.MATERIAL_TYPE := NEW.MATERIAL_TYPE;
            V_RECORD_NEW.ROUTECODE := NEW.ROUTECODE;
            V_RECORD_NEW.COSTSHEET_CODE := NEW.COSTSHEET_CODE;
            V_RECORD_NEW.DESC1 := NEW.DESC1;
            V_RECORD_NEW.DESC2 := NEW.DESC2;
            V_RECORD_NEW.DESC3 := NEW.DESC3;
            V_RECORD_NEW.DESC4 := NEW.DESC4;
            V_RECORD_NEW.DESC5 := NEW.DESC5;
            V_RECORD_NEW.DESC6 := NEW.DESC6;
            V_RECORD_NEW.NUM1 := NEW.NUM1;
            V_RECORD_NEW.NUM2 := NEW.NUM2;
            V_RECORD_NEW.NUM3 := NEW.NUM3;
            V_RECORD_NEW.BLOCK_SALE := NEW.BLOCK_SALE;
            V_RECORD_NEW.BLOCK_SALE_BEFORE := NEW.BLOCK_SALE_BEFORE;
            V_RECORD_NEW.BLOCK_SALE_AFTER := NEW.BLOCK_SALE_AFTER;
            V_RECORD_NEW.BLOCK_SALE_REASON := NEW.BLOCK_SALE_REASON;
            V_RECORD_NEW.ISPRICE_EXCLUDES_TAX := NEW.ISPRICE_EXCLUDES_TAX;
            V_RECORD_NEW.AUTOQTYPOPUP := NEW.AUTOQTYPOPUP;
            V_RECORD_NEW.POS_RETURN_BEHAVIOR := NEW.POS_RETURN_BEHAVIOR;
            V_RECORD_NEW.SEARCH_STRING := NEW.SEARCH_STRING;
            V_RECORD_NEW.PRICE_CHANGE_LIMIT := NEW.PRICE_CHANGE_LIMIT;
            V_RECORD_NEW.UDFSTRING01 := NEW.UDFSTRING01;
            V_RECORD_NEW.UDFSTRING02 := NEW.UDFSTRING02;
            V_RECORD_NEW.UDFSTRING03 := NEW.UDFSTRING03;
            V_RECORD_NEW.UDFSTRING04 := NEW.UDFSTRING04;
            V_RECORD_NEW.UDFSTRING05 := NEW.UDFSTRING05;
            V_RECORD_NEW.UDFSTRING06 := NEW.UDFSTRING06;
            V_RECORD_NEW.UDFSTRING07 := NEW.UDFSTRING07;
            V_RECORD_NEW.UDFSTRING08 := NEW.UDFSTRING08;
            V_RECORD_NEW.UDFSTRING09 := NEW.UDFSTRING09;
            V_RECORD_NEW.UDFSTRING10 := NEW.UDFSTRING10;
            V_RECORD_NEW.UDFNUM01 := NEW.UDFNUM01;
            V_RECORD_NEW.UDFNUM02 := NEW.UDFNUM02;
            V_RECORD_NEW.UDFNUM03 := NEW.UDFNUM03;
            V_RECORD_NEW.UDFNUM04 := NEW.UDFNUM04;
            V_RECORD_NEW.UDFNUM05 := NEW.UDFNUM05;
            V_RECORD_NEW.UDFDATE01 := NEW.UDFDATE01;
            V_RECORD_NEW.UDFDATE02 := NEW.UDFDATE02;
            V_RECORD_NEW.UDFDATE03 := NEW.UDFDATE03;
            V_RECORD_NEW.UDFDATE04 := NEW.UDFDATE04;
            V_RECORD_NEW.UDFDATE05 := NEW.UDFDATE05;
            V_RECORD_NEW.COGS_CODE := NEW.COGS_CODE;
            V_RECORD_NEW.INVHSNSACMAIN_CODE := NEW.INVHSNSACMAIN_CODE;
            V_RECORD_NEW.GST_ITC_APPL := NEW.GST_ITC_APPL;
            V_RECORD_NEW.GLCODE := NEW.GLCODE;
            V_RECORD_NEW.SLCODE := NEW.SLCODE;
          END IF;  
            
         IF TG_OP = 'UPDATE' OR TG_OP = 'DELETE' THEN 
	   
            V_RECORD_OLD.ACTION := V_ACTION;
            V_RECORD_OLD.ACTION_SUBTYPE := 'OLD';
            V_RECORD_OLD.TRANSACTION_ID := V_TRNID::TEXT;  
            V_RECORD_OLD.ICODE := OLD.ICODE;
            V_RECORD_OLD.GRPCODE := OLD.GRPCODE;
            V_RECORD_OLD.CNAME1 := OLD.CNAME1;
            V_RECORD_OLD.CCODE1 := OLD.CCODE1;
            V_RECORD_OLD.CNAME2 := OLD.CNAME2;
            V_RECORD_OLD.CCODE2 := OLD.CCODE2;
            V_RECORD_OLD.CNAME3 := OLD.CNAME3;
            V_RECORD_OLD.CCODE3 := OLD.CCODE3;
            V_RECORD_OLD.CNAME4 := OLD.CNAME4;
            V_RECORD_OLD.CCODE4 := OLD.CCODE4;
            V_RECORD_OLD.CNAME5 := OLD.CNAME5;
            V_RECORD_OLD.CCODE5 := OLD.CCODE5;
            V_RECORD_OLD.CNAME6 := OLD.CNAME6;
            V_RECORD_OLD.CCODE6 := OLD.CCODE6;
            V_RECORD_OLD.RATE := OLD.RATE;
            V_RECORD_OLD.MRP := OLD.MRP;
            V_RECORD_OLD.BARRQ := OLD.BARRQ;
            V_RECORD_OLD.BARUNIT := OLD.BARUNIT;
            V_RECORD_OLD.REM := OLD.REM;
            V_RECORD_OLD.EXT := OLD.EXT;
            V_RECORD_OLD.TAXCODE := OLD.TAXCODE;
            V_RECORD_OLD.PARTYCODE := OLD.PARTYCODE;
            V_RECORD_OLD.PARTYNAME := OLD.PARTYNAME;
            V_RECORD_OLD.GENERATED := OLD.GENERATED;
            V_RECORD_OLD.LAST_CHANGED := OLD.LAST_CHANGED;
            V_RECORD_OLD.CMPCODE := OLD.CMPCODE;
            V_RECORD_OLD.UNITNAME := OLD.UNITNAME;
            V_RECORD_OLD.CHARGE := OLD.CHARGE;
            V_RECORD_OLD.GRCCODE := OLD.GRCCODE;
            V_RECORD_OLD.STKPLANCODE  := OLD.STKPLANCODE;
            V_RECORD_OLD.BARCODE := OLD.BARCODE;
            V_RECORD_OLD.LISTED_MRP := OLD.LISTED_MRP;
            V_RECORD_OLD.EXPIRY_DATE := OLD.EXPIRY_DATE;
            V_RECORD_OLD.PARTYALIAS := OLD.PARTYALIAS;
            V_RECORD_OLD.STOCKINDATE := OLD.STOCKINDATE;
            V_RECORD_OLD.CONSIDERINORDER = OLD.CONSIDERINORDER;
            V_RECORD_OLD.SHRTNAME := OLD.SHRTNAME;
            V_RECORD_OLD.CONSIDERASFREE := OLD.CONSIDERASFREE;
            V_RECORD_OLD.NONINVENTORY := OLD.NONINVENTORY;
            V_RECORD_OLD.COSTRATE := OLD.COSTRATE;
            V_RECORD_OLD.WSP := OLD.WSP;
            V_RECORD_OLD.INVARTICLE_CODE := OLD.INVARTICLE_CODE;
            V_RECORD_OLD.ALLOW_PRICE_MODIFICATION  := OLD.ALLOW_PRICE_MODIFICATION;
            V_RECORD_OLD.ALT_MRP   := OLD.ALT_MRP;
            V_RECORD_OLD.ALT_LISTED_MRP := OLD.ALT_LISTED_MRP;
            V_RECORD_OLD.ISSERVICE := OLD.ISSERVICE;
            V_RECORD_OLD.SERVICE_DAYS  := OLD.SERVICE_DAYS;
            V_RECORD_OLD.POS_MULTIPRICE_ACTION := OLD.POS_MULTIPRICE_ACTION;
            V_RECORD_OLD.NEGATIVE_STOCK_ALERT := OLD.NEGATIVE_STOCK_ALERT;
            V_RECORD_OLD.ISMETAL := OLD.ISMETAL;
            V_RECORD_OLD.ITEM_NAME := OLD.ITEM_NAME;
            V_RECORD_OLD.PRICE_TERMS := OLD.PRICE_TERMS;
            V_RECORD_OLD.PRICE_BASIS := OLD.PRICE_BASIS;
            V_RECORD_OLD.INVMETAL_CODE := OLD.INVMETAL_CODE;
            V_RECORD_OLD.NET_WEIGHT := OLD.NET_WEIGHT;
            V_RECORD_OLD.GRS_WEIGHT := OLD.GRS_WEIGHT;
            V_RECORD_OLD.JOB_COST_BASIS := OLD.JOB_COST_BASIS;
            V_RECORD_OLD.JOB_COST_AMT := OLD.JOB_COST_AMT;
            V_RECORD_OLD.PART_QTY := OLD.PART_QTY;
            V_RECORD_OLD.CERTIFICATE_NO := OLD.CERTIFICATE_NO;
            V_RECORD_OLD.D_COUNT := OLD.D_COUNT;
            V_RECORD_OLD.D_SIZE := OLD.D_SIZE;
            V_RECORD_OLD.D_WEIGHT := OLD.D_WEIGHT;
            V_RECORD_OLD.D_VALUE := OLD.D_VALUE;
            V_RECORD_OLD.D_DESC := OLD.D_DESC;
            V_RECORD_OLD.C_COUNT := OLD.C_COUNT;
            V_RECORD_OLD.C_WEIGHT := OLD.C_WEIGHT;
            V_RECORD_OLD.C_VALUE := OLD.C_VALUE;
            V_RECORD_OLD.C_DESC := OLD.C_DESC;
            V_RECORD_OLD.O_COUNT := OLD.O_COUNT;
            V_RECORD_OLD.O_WEIGHT  := OLD.O_WEIGHT;
            V_RECORD_OLD.O_VALUE  := OLD.O_VALUE;
            V_RECORD_OLD.O_DESC := OLD.O_DESC;
            V_RECORD_OLD.OTHER_CHG := OLD.OTHER_CHG;
            V_RECORD_OLD.MATERIAL_TYPE := OLD.MATERIAL_TYPE;
            V_RECORD_OLD.ROUTECODE := OLD.ROUTECODE;
            V_RECORD_OLD.COSTSHEET_CODE := OLD.COSTSHEET_CODE;
            V_RECORD_OLD.DESC1 := OLD.DESC1;
            V_RECORD_OLD.DESC2 := OLD.DESC2;
            V_RECORD_OLD.DESC3 := OLD.DESC3;
            V_RECORD_OLD.DESC4 := OLD.DESC4;
            V_RECORD_OLD.DESC5 := OLD.DESC5;
            V_RECORD_OLD.DESC6 := OLD.DESC6;
            V_RECORD_OLD.NUM1 := OLD.NUM1;
            V_RECORD_OLD.NUM2 := OLD.NUM2;
            V_RECORD_OLD.NUM3 := OLD.NUM3;
            V_RECORD_OLD.BLOCK_SALE := OLD.BLOCK_SALE;
            V_RECORD_OLD.BLOCK_SALE_BEFORE := OLD.BLOCK_SALE_BEFORE;
            V_RECORD_OLD.BLOCK_SALE_AFTER := OLD.BLOCK_SALE_AFTER;
            V_RECORD_OLD.BLOCK_SALE_REASON := OLD.BLOCK_SALE_REASON;
            V_RECORD_OLD.ISPRICE_EXCLUDES_TAX  := OLD.ISPRICE_EXCLUDES_TAX;
            V_RECORD_OLD.AUTOQTYPOPUP := OLD.AUTOQTYPOPUP;
            V_RECORD_OLD.POS_RETURN_BEHAVIOR := OLD.POS_RETURN_BEHAVIOR;
            V_RECORD_OLD.SEARCH_STRING := OLD.SEARCH_STRING;
            V_RECORD_OLD.PRICE_CHANGE_LIMIT := OLD.PRICE_CHANGE_LIMIT;
            V_RECORD_OLD.UDFSTRING01 := OLD.UDFSTRING01;
            V_RECORD_OLD.UDFSTRING02 := OLD.UDFSTRING02;
            V_RECORD_OLD.UDFSTRING03 := OLD.UDFSTRING03;
            V_RECORD_OLD.UDFSTRING04 := OLD.UDFSTRING04;
            V_RECORD_OLD.UDFSTRING05 := OLD.UDFSTRING05;
            V_RECORD_OLD.UDFSTRING06 := OLD.UDFSTRING06;
            V_RECORD_OLD.UDFSTRING07 := OLD.UDFSTRING07;
            V_RECORD_OLD.UDFSTRING08 := OLD.UDFSTRING08;
            V_RECORD_OLD.UDFSTRING09 := OLD.UDFSTRING09;
            V_RECORD_OLD.UDFSTRING10 := OLD.UDFSTRING10;
            V_RECORD_OLD.UDFNUM01 := OLD.UDFNUM01;
            V_RECORD_OLD.UDFNUM02 := OLD.UDFNUM02;
            V_RECORD_OLD.UDFNUM03 := OLD.UDFNUM03;
            V_RECORD_OLD.UDFNUM04 := OLD.UDFNUM04;
            V_RECORD_OLD.UDFNUM05 := OLD.UDFNUM05;
            V_RECORD_OLD.UDFDATE01 := OLD.UDFDATE01;
            V_RECORD_OLD.UDFDATE02 := OLD.UDFDATE02;
            V_RECORD_OLD.UDFDATE03 := OLD.UDFDATE03;
            V_RECORD_OLD.UDFDATE04 := OLD.UDFDATE04;
            V_RECORD_OLD.UDFDATE05 := OLD.UDFDATE05;
            V_RECORD_OLD.COGS_CODE := OLD.COGS_CODE;
            V_RECORD_OLD.INVHSNSACMAIN_CODE := OLD.INVHSNSACMAIN_CODE;
            V_RECORD_OLD.GST_ITC_APPL := OLD.GST_ITC_APPL;
            V_RECORD_OLD.GLCODE := OLD.GLCODE;
            V_RECORD_OLD.SLCODE := OLD.SLCODE;
          END IF;  

    IF TG_OP = 'INSERT' THEN
	    V_REC_COUNT := 1;
        INSERT INTO AUD_INVITEM SELECT V_RECORD_NEW.*;
    END IF;

    IF TG_OP = 'UPDATE' THEN
	FOR I IN (
		SELECT V_RECORD_OLD.ICODE,V_RECORD_OLD.GRPCODE,
		V_RECORD_OLD.CNAME1,
		V_RECORD_OLD.CCODE1,
		V_RECORD_OLD.CNAME2,
		V_RECORD_OLD.CCODE2,
		V_RECORD_OLD.CNAME3,
		V_RECORD_OLD.CCODE3,
		V_RECORD_OLD.CNAME4 ,      
		V_RECORD_OLD.CCODE4,
		V_RECORD_OLD.CNAME5,
		V_RECORD_OLD.CCODE5,
		V_RECORD_OLD.CNAME6,
		V_RECORD_OLD.CCODE6,
		V_RECORD_OLD.RATE,
		V_RECORD_OLD.MRP,
		V_RECORD_OLD.BARRQ,
		V_RECORD_OLD.BARUNIT,
		V_RECORD_OLD.REM,
		V_RECORD_OLD.EXT,
		V_RECORD_OLD.TAXCODE,
		V_RECORD_OLD.PARTYCODE,
		V_RECORD_OLD.PARTYNAME,
		V_RECORD_OLD.GENERATED,		 
		 V_RECORD_OLD.CMPCODE, 
		 V_RECORD_OLD.UNITNAME,
		 V_RECORD_OLD.CHARGE,
		 V_RECORD_OLD.GRCCODE,
		 V_RECORD_OLD.STKPLANCODE,
		 V_RECORD_OLD.BARCODE,
		 V_RECORD_OLD.LISTED_MRP,
		 V_RECORD_OLD.EXPIRY_DATE,
		 V_RECORD_OLD.PARTYALIAS,
		 V_RECORD_OLD.STOCKINDATE,
		 V_RECORD_OLD.CONSIDERINORDER,
		 V_RECORD_OLD.SHRTNAME,
		 V_RECORD_OLD.CONSIDERASFREE ,
		 V_RECORD_OLD.NONINVENTORY,
		 V_RECORD_OLD.COSTRATE,
		 V_RECORD_OLD.WSP,
		 V_RECORD_OLD.INVARTICLE_CODE,
		 V_RECORD_OLD.ALLOW_PRICE_MODIFICATION,
		 V_RECORD_OLD.ALT_MRP,
		 V_RECORD_OLD.ALT_LISTED_MRP,
		 V_RECORD_OLD.ISSERVICE,
		 V_RECORD_OLD.SERVICE_DAYS,
		 V_RECORD_OLD.POS_MULTIPRICE_ACTION,
		 V_RECORD_OLD.NEGATIVE_STOCK_ALERT,
		 V_RECORD_OLD.ISMETAL,
		 V_RECORD_OLD.ITEM_NAME,
		 V_RECORD_OLD.PRICE_TERMS,
		 V_RECORD_OLD.PRICE_BASIS,
		 V_RECORD_OLD.INVMETAL_CODE,
		 V_RECORD_OLD.NET_WEIGHT,
		 V_RECORD_OLD.GRS_WEIGHT,
		 V_RECORD_OLD.JOB_COST_BASIS,
		 V_RECORD_OLD.JOB_COST_AMT,
		 V_RECORD_OLD.PART_QTY,
		 V_RECORD_OLD.CERTIFICATE_NO,
		 V_RECORD_OLD.D_COUNT,
		 V_RECORD_OLD.D_SIZE ,        
		 V_RECORD_OLD.D_WEIGHT,
		 V_RECORD_OLD.D_VALUE,
		 V_RECORD_OLD.D_DESC,
		 V_RECORD_OLD.C_COUNT,
		 V_RECORD_OLD.C_WEIGHT,
		 V_RECORD_OLD.C_VALUE,
		 V_RECORD_OLD.C_DESC,
		 V_RECORD_OLD.O_COUNT,
		 V_RECORD_OLD.O_WEIGHT,
		 V_RECORD_OLD.O_VALUE,
		 V_RECORD_OLD.O_DESC,
		 V_RECORD_OLD.OTHER_CHG,
		 V_RECORD_OLD.MATERIAL_TYPE,
		 V_RECORD_OLD.ROUTECODE,
		 V_RECORD_OLD.COSTSHEET_CODE,
		  V_RECORD_OLD.DESC1,    
		  V_RECORD_OLD.DESC2,   
		  V_RECORD_OLD.DESC3,  
		  V_RECORD_OLD.DESC4, 
		  V_RECORD_OLD.DESC5,
		  V_RECORD_OLD.DESC6,
		  V_RECORD_OLD.NUM1,
		  V_RECORD_OLD.NUM2,
		  V_RECORD_OLD.NUM3,
		  V_RECORD_OLD.BLOCK_SALE,
		  V_RECORD_OLD.BLOCK_SALE_BEFORE,
		  V_RECORD_OLD.BLOCK_SALE_AFTER,
		  V_RECORD_OLD.BLOCK_SALE_REASON,
		  V_RECORD_OLD.ISPRICE_EXCLUDES_TAX,
		  V_RECORD_OLD.AUTOQTYPOPUP,
		  V_RECORD_OLD.POS_RETURN_BEHAVIOR,
		  V_RECORD_OLD.SEARCH_STRING,
		  V_RECORD_OLD.PRICE_CHANGE_LIMIT,
		  V_RECORD_OLD.UDFSTRING01,
		  V_RECORD_OLD.UDFSTRING02,
		  V_RECORD_OLD.UDFSTRING03,
		  V_RECORD_OLD.UDFSTRING04,
		  V_RECORD_OLD.UDFSTRING05,
		  V_RECORD_OLD.UDFSTRING06,
		  V_RECORD_OLD.UDFSTRING07,
		  V_RECORD_OLD.UDFSTRING08,
		  V_RECORD_OLD.UDFSTRING09,
		  V_RECORD_OLD.UDFSTRING10,
		  V_RECORD_OLD.UDFNUM01,
		  V_RECORD_OLD.UDFNUM02,
		  V_RECORD_OLD.UDFNUM03,
		  V_RECORD_OLD.UDFNUM04,
		  V_RECORD_OLD.UDFNUM05,
		  V_RECORD_OLD.UDFDATE01,
		  V_RECORD_OLD.UDFDATE02,
		  V_RECORD_OLD.UDFDATE03,
		  V_RECORD_OLD.UDFDATE04,
		  V_RECORD_OLD.UDFDATE05,
		  V_RECORD_OLD.COGS_CODE,
		  V_RECORD_OLD.INVHSNSACMAIN_CODE,
		  V_RECORD_OLD.GST_ITC_APPL,
		  V_RECORD_OLD.GLCODE,
		  V_RECORD_OLD.SLCODE
		EXCEPT
		SELECT V_RECORD_NEW.ICODE,V_RECORD_NEW.GRPCODE,
			V_RECORD_NEW.CNAME1,
		V_RECORD_NEW.CCODE1,
		V_RECORD_NEW.CNAME2,
		V_RECORD_NEW.CCODE2,
		V_RECORD_NEW.CNAME3,
		V_RECORD_NEW.CCODE3,
		V_RECORD_NEW.CNAME4 ,      
		V_RECORD_NEW.CCODE4,
		V_RECORD_NEW.CNAME5,
		V_RECORD_NEW.CCODE5,
		V_RECORD_NEW.CNAME6,
		V_RECORD_NEW.CCODE6,
		V_RECORD_NEW.RATE,
		V_RECORD_NEW.MRP,
		V_RECORD_NEW.BARRQ,
		V_RECORD_NEW.BARUNIT,
		V_RECORD_NEW.REM,
		V_RECORD_NEW.EXT,
		V_RECORD_NEW.TAXCODE,
		V_RECORD_NEW.PARTYCODE,
		V_RECORD_NEW.PARTYNAME,
		V_RECORD_NEW.GENERATED,		
		 V_RECORD_NEW.CMPCODE, 
		 V_RECORD_NEW.UNITNAME,
		 V_RECORD_NEW.CHARGE,
		 V_RECORD_NEW.GRCCODE,
		 V_RECORD_NEW.STKPLANCODE,
		 V_RECORD_NEW.BARCODE,
		 V_RECORD_NEW.LISTED_MRP,
		 V_RECORD_NEW.EXPIRY_DATE,
		 V_RECORD_NEW.PARTYALIAS,
		 V_RECORD_NEW.STOCKINDATE,
		 V_RECORD_NEW.CONSIDERINORDER,
		 V_RECORD_NEW.SHRTNAME,
		 V_RECORD_NEW.CONSIDERASFREE,
		 V_RECORD_NEW.NONINVENTORY,
		 V_RECORD_NEW.COSTRATE,
		 V_RECORD_NEW.WSP,
		 V_RECORD_NEW.INVARTICLE_CODE,
		 V_RECORD_NEW.ALLOW_PRICE_MODIFICATION,
		 V_RECORD_NEW.ALT_MRP ,
		 V_RECORD_NEW.ALT_LISTED_MRP,
		 V_RECORD_NEW.ISSERVICE,
		 V_RECORD_NEW.SERVICE_DAYS ,
		 V_RECORD_NEW.POS_MULTIPRICE_ACTION,
		 V_RECORD_NEW.NEGATIVE_STOCK_ALERT,
		 V_RECORD_NEW.ISMETAL,
		 V_RECORD_NEW.ITEM_NAME,
		 V_RECORD_NEW.PRICE_TERMS,
		 V_RECORD_NEW.PRICE_BASIS,
		 V_RECORD_NEW.INVMETAL_CODE,
		 V_RECORD_NEW.NET_WEIGHT,
		 V_RECORD_NEW.GRS_WEIGHT ,
		 V_RECORD_NEW.JOB_COST_BASIS,
		 V_RECORD_NEW.JOB_COST_AMT,
		 V_RECORD_NEW.PART_QTY,
		 V_RECORD_NEW.CERTIFICATE_NO,
		 V_RECORD_NEW.D_COUNT,
		 V_RECORD_NEW.D_SIZE ,        
		 V_RECORD_NEW.D_WEIGHT,
		 V_RECORD_NEW.D_VALUE ,
		 V_RECORD_NEW.D_DESC,
		 V_RECORD_NEW.C_COUNT,
		 V_RECORD_NEW.C_WEIGHT,
		 V_RECORD_NEW.C_VALUE,
		 V_RECORD_NEW.C_DESC,
		 V_RECORD_NEW.O_COUNT,
		 V_RECORD_NEW.O_WEIGHT,
		 V_RECORD_NEW.O_VALUE,
		 V_RECORD_NEW.O_DESC,
		 V_RECORD_NEW.OTHER_CHG,
		 V_RECORD_NEW.MATERIAL_TYPE,
		 V_RECORD_NEW.ROUTECODE,
		 V_RECORD_NEW.COSTSHEET_CODE,
		  V_RECORD_NEW.DESC1,    
		  V_RECORD_NEW.DESC2,   
		  V_RECORD_NEW.DESC3,  
		  V_RECORD_NEW.DESC4, 
		  V_RECORD_NEW.DESC5,
		  V_RECORD_NEW.DESC6,
		  V_RECORD_NEW.NUM1,
		  V_RECORD_NEW.NUM2,
		  V_RECORD_NEW.NUM3,
		  V_RECORD_NEW.BLOCK_SALE,
		  V_RECORD_NEW.BLOCK_SALE_BEFORE,
		  V_RECORD_NEW.BLOCK_SALE_AFTER,
		  V_RECORD_NEW.BLOCK_SALE_REASON,
		  V_RECORD_NEW.ISPRICE_EXCLUDES_TAX,
		  V_RECORD_NEW.AUTOQTYPOPUP,
		  V_RECORD_NEW.POS_RETURN_BEHAVIOR,
		  V_RECORD_NEW.SEARCH_STRING,
		  V_RECORD_NEW.PRICE_CHANGE_LIMIT,
		  V_RECORD_NEW.UDFSTRING01,
		  V_RECORD_NEW.UDFSTRING02,
		  V_RECORD_NEW.UDFSTRING03,
		  V_RECORD_NEW.UDFSTRING04,
		  V_RECORD_NEW.UDFSTRING05,
		  V_RECORD_NEW.UDFSTRING06,
		  V_RECORD_NEW.UDFSTRING07,
		  V_RECORD_NEW.UDFSTRING08,
		  V_RECORD_NEW.UDFSTRING09,
		  V_RECORD_NEW.UDFSTRING10,
		  V_RECORD_NEW.UDFNUM01,
		  V_RECORD_NEW.UDFNUM02,
		  V_RECORD_NEW.UDFNUM03,
		  V_RECORD_NEW.UDFNUM04,
		  V_RECORD_NEW.UDFNUM05,
		  V_RECORD_NEW.UDFDATE01,
		  V_RECORD_NEW.UDFDATE02,
		  V_RECORD_NEW.UDFDATE03,
		  V_RECORD_NEW.UDFDATE04,
		  V_RECORD_NEW.UDFDATE05,
		  V_RECORD_NEW.COGS_CODE,
		  V_RECORD_NEW.INVHSNSACMAIN_CODE,
		  V_RECORD_NEW.GST_ITC_APPL,
		  V_RECORD_NEW.GLCODE,
		  V_RECORD_NEW.SLCODE	
			 )
	LOOP
	  V_REC_COUNT := 1; 
      INSERT INTO AUD_INVITEM SELECT V_RECORD_OLD.*;
       INSERT INTO AUD_INVITEM SELECT V_RECORD_NEW.*;    
	END LOOP;   
    END IF;

    IF TG_OP = 'DELETE' THEN
	 V_REC_COUNT := 1;
     INSERT INTO AUD_INVITEM SELECT V_RECORD_OLD.*;
    END IF;
	
	IF V_REC_COUNT >  0
	THEN
	   BEGIN
            INSERT INTO AUD_TRANSACTION (TRANSACTION_ID, TRANSACTION_DATE, LOGIN_USER, PROGRAM, MODULE_SHORTCODE, MODULE_TYPE)
            VALUES (V_TRNID,   aws_oracle_ext.sysdate(),V_LOGINUSER, V_PROGRAM, 'Item', 'Item');
       EXCEPTION WHEN unique_violation THEN
            NULL;
       END;  

       BEGIN  
             INSERT INTO AUD_TRANSACTION_TABLE (TRANSACTION_ID, TABLE_NAME)
             VALUES (V_TRNID,  'INVITEM');
       EXCEPTION WHEN unique_violation THEN
             NULL;
       END; 
	END IF;   
    

    IF TG_OP = 'INSERT' THEN
        RETURN NEW;
    ELSIF TG_OP = 'UPDATE' THEN
        RETURN NEW;
    ELSIF TG_OP = 'DELETE' THEN
        RETURN OLD;
    END IF;
    EXCEPTION
        WHEN others THEN
            CALL pgmain.erraudit(SESSION_USER::text, 'T_INITEM_AUD'::CHARACTER, SQLSTATE::text, SQLERRM);
			RAISE;
			RETURN NULL;
END
"""
  returnType = trigger
  arguments = [
  ]
  language = plpgsql
}

